<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 405 Term Project: src/main.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ME 405 Term Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">main.py File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This is the main file for the term project.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1ce4fe2a24ca3eee1412b27d7cd91669" id="r_a1ce4fe2a24ca3eee1412b27d7cd91669"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1ce4fe2a24ca3eee1412b27d7cd91669">main.task1_fun</a> (data)</td></tr>
<tr class="memdesc:a1ce4fe2a24ca3eee1412b27d7cd91669"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task 1 runs the panning motion for motor #1.  <br /></td></tr>
<tr class="separator:a1ce4fe2a24ca3eee1412b27d7cd91669"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2d5a4a7d8204b719e52bac56cb9d4c1" id="r_aa2d5a4a7d8204b719e52bac56cb9d4c1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa2d5a4a7d8204b719e52bac56cb9d4c1">main.task2_fun</a> (data)</td></tr>
<tr class="memdesc:aa2d5a4a7d8204b719e52bac56cb9d4c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task 2 deals with the thermal camera.  <br /></td></tr>
<tr class="separator:aa2d5a4a7d8204b719e52bac56cb9d4c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae22612ebab7d969dfeda541f6c5b379d" id="r_ae22612ebab7d969dfeda541f6c5b379d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae22612ebab7d969dfeda541f6c5b379d">main.task3_fun</a> (data)</td></tr>
<tr class="memdesc:ae22612ebab7d969dfeda541f6c5b379d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task 3 runs the trigger motion for the motor #2.  <br /></td></tr>
<tr class="separator:ae22612ebab7d969dfeda541f6c5b379d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78e160f006bfa8745eaba50b1d9bd2ce" id="r_a78e160f006bfa8745eaba50b1d9bd2ce"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a78e160f006bfa8745eaba50b1d9bd2ce">main.task4_fun</a> (data)</td></tr>
<tr class="memdesc:a78e160f006bfa8745eaba50b1d9bd2ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task 4 enables a kill switch wire for the design to be terminated upon pulling the wire.  <br /></td></tr>
<tr class="separator:a78e160f006bfa8745eaba50b1d9bd2ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a3e1daf9ed7049dd55b3c102b6bd1fa8d" id="r_a3e1daf9ed7049dd55b3c102b6bd1fa8d"><td class="memItemLeft" align="right" valign="top"><a id="a3e1daf9ed7049dd55b3c102b6bd1fa8d" name="a3e1daf9ed7049dd55b3c102b6bd1fa8d"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>main.done</b> = False</td></tr>
<tr class="separator:a3e1daf9ed7049dd55b3c102b6bd1fa8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0690dfd816a264179c03550b41373d7e" id="r_a0690dfd816a264179c03550b41373d7e"><td class="memItemLeft" align="right" valign="top"><a id="a0690dfd816a264179c03550b41373d7e" name="a0690dfd816a264179c03550b41373d7e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>main.stp</b> = task_share.Share('h', thread_protect=False, name=&quot;Shared Setpoint&quot;)</td></tr>
<tr class="separator:a0690dfd816a264179c03550b41373d7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab434cf2b0d709c298c040b212d494ab0" id="r_ab434cf2b0d709c298c040b212d494ab0"><td class="memItemLeft" align="right" valign="top"><a id="ab434cf2b0d709c298c040b212d494ab0" name="ab434cf2b0d709c298c040b212d494ab0"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>main.sht</b> = task_share.Share('h', thread_protect=False, name=&quot;Shared Shoot&quot;)</td></tr>
<tr class="separator:ab434cf2b0d709c298c040b212d494ab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f104200f9b13fd10336e6e30eb5282b" id="r_a3f104200f9b13fd10336e6e30eb5282b"><td class="memItemLeft" align="right" valign="top"><a id="a3f104200f9b13fd10336e6e30eb5282b" name="a3f104200f9b13fd10336e6e30eb5282b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>main.wait</b> = task_share.Share('h', thread_protect=False, name=&quot;Shared Wait&quot;)</td></tr>
<tr class="separator:a3f104200f9b13fd10336e6e30eb5282b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4b8f4290f8d32e70654f6deb864787f" id="r_af4b8f4290f8d32e70654f6deb864787f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af4b8f4290f8d32e70654f6deb864787f">main.task1</a></td></tr>
<tr class="separator:af4b8f4290f8d32e70654f6deb864787f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99d189b8f9eb3784cf7d4e5c3241b562" id="r_a99d189b8f9eb3784cf7d4e5c3241b562"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a99d189b8f9eb3784cf7d4e5c3241b562">main.task2</a></td></tr>
<tr class="separator:a99d189b8f9eb3784cf7d4e5c3241b562"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a120516a5d42c212c898d4616d266077a" id="r_a120516a5d42c212c898d4616d266077a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a120516a5d42c212c898d4616d266077a">main.task3</a></td></tr>
<tr class="separator:a120516a5d42c212c898d4616d266077a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0ee3c5b5359f76becfe27534e82085f" id="r_ac0ee3c5b5359f76becfe27534e82085f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac0ee3c5b5359f76becfe27534e82085f">main.task4</a></td></tr>
<tr class="separator:ac0ee3c5b5359f76becfe27534e82085f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40b697d790636df39ccd298d72b767a1" id="r_a40b697d790636df39ccd298d72b767a1"><td class="memItemLeft" align="right" valign="top"><a id="a40b697d790636df39ccd298d72b767a1" name="a40b697d790636df39ccd298d72b767a1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>main.t0</b> = utime.ticks_ms()</td></tr>
<tr class="separator:a40b697d790636df39ccd298d72b767a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is the main file for the term project. </p>
<dl class="section author"><dt>Author</dt><dd>Aiden Taylor, Jack Foxcroft, Julia Fay </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2024-Mar-18 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a1ce4fe2a24ca3eee1412b27d7cd91669" name="a1ce4fe2a24ca3eee1412b27d7cd91669"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ce4fe2a24ca3eee1412b27d7cd91669">&#9670;&#160;</a></span>task1_fun()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.task1_fun </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>data</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task 1 runs the panning motion for motor #1. </p>
<p>This task first moves the turret into the aiming position (180 degrees from initial position). Then, updates the panning motor setpoint calculated by the thermal camera and runs until the PWM signal falls below 50% for more than 20 cycles and sets the panning motor duty cycle to 0 and waits for the trigger motor to complete its task</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The tuple used to store all shared variables between tasks </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa2d5a4a7d8204b719e52bac56cb9d4c1" name="aa2d5a4a7d8204b719e52bac56cb9d4c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2d5a4a7d8204b719e52bac56cb9d4c1">&#9670;&#160;</a></span>task2_fun()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.task2_fun </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>data</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task 2 deals with the thermal camera. </p>
<p>It initializes the camera's i2c communication protocal them waits until the panning motor completes its initial movement to the aiming position 180 degrees from the initial postion. Then wait 3.25 seconds and get the image. Then, using the csv_reader class, calculate the column with the maximum summed thermal signature and calculate the setpoint based on the column.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The tuple used to store all shared variables between tasks </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae22612ebab7d969dfeda541f6c5b379d" name="ae22612ebab7d969dfeda541f6c5b379d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae22612ebab7d969dfeda541f6c5b379d">&#9670;&#160;</a></span>task3_fun()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.task3_fun </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>data</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task 3 runs the trigger motion for the motor #2. </p>
<p>First, task 3 waits until the panning motor reaches the setpoint calculated by the thermal camera. Then, it runs the trigger motor to a setpoint of 30 degrees, then returns to its intial position.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The tuple used to store all shared variables between tasks </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a78e160f006bfa8745eaba50b1d9bd2ce" name="a78e160f006bfa8745eaba50b1d9bd2ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78e160f006bfa8745eaba50b1d9bd2ce">&#9670;&#160;</a></span>task4_fun()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.task4_fun </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>data</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task 4 enables a kill switch wire for the design to be terminated upon pulling the wire. </p>
<p>State 0 initializes the pin C0 to an input and if the pin it pulled terminate the program.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The tuple used to store all shared variables between tasks </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="af4b8f4290f8d32e70654f6deb864787f" name="af4b8f4290f8d32e70654f6deb864787f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4b8f4290f8d32e70654f6deb864787f">&#9670;&#160;</a></span>task1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.task1</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  cotask.Task(task1_fun, name=<span class="stringliteral">&quot;Task_1&quot;</span>, priority=2, period=10,</div>
<div class="line"><span class="lineno">    2</span>                        profile=<span class="keyword">True</span>, trace=<span class="keyword">False</span>, shares=(stp, sht, wait))</div>
</div><!-- fragment -->
</div>
</div>
<a id="a99d189b8f9eb3784cf7d4e5c3241b562" name="a99d189b8f9eb3784cf7d4e5c3241b562"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99d189b8f9eb3784cf7d4e5c3241b562">&#9670;&#160;</a></span>task2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.task2</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  cotask.Task(task2_fun, name=<span class="stringliteral">&quot;Task_2&quot;</span>, priority=2, period=180,</div>
<div class="line"><span class="lineno">    2</span>                        profile=<span class="keyword">True</span>, trace=<span class="keyword">False</span>, shares=(stp, sht, wait))</div>
</div><!-- fragment -->
</div>
</div>
<a id="a120516a5d42c212c898d4616d266077a" name="a120516a5d42c212c898d4616d266077a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a120516a5d42c212c898d4616d266077a">&#9670;&#160;</a></span>task3</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.task3</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  cotask.Task(task3_fun, name=<span class="stringliteral">&quot;Task_3&quot;</span>, priority=2, period=12,</div>
<div class="line"><span class="lineno">    2</span>                       profile=<span class="keyword">True</span>, trace=<span class="keyword">False</span>, shares=(stp, sht, wait))</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac0ee3c5b5359f76becfe27534e82085f" name="ac0ee3c5b5359f76becfe27534e82085f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0ee3c5b5359f76becfe27534e82085f">&#9670;&#160;</a></span>task4</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">main.task4</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  cotask.Task(task4_fun, name=<span class="stringliteral">&quot;Task_4&quot;</span>, priority=2, period=12,</div>
<div class="line"><span class="lineno">    2</span>                       profile=<span class="keyword">True</span>, trace=<span class="keyword">False</span>, shares=(stp, sht, wait))</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
